<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>N√¥ng Tr·∫°i Heo Con - Kho</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;600;800;900&display=swap');
        body { margin: 0; padding: 0; overflow: hidden; font-family: 'Lexend', sans-serif; background: #f8fafc; }
        .bg-header { position: absolute; top: 0; left: 0; width: 100%; height: 160px; background: linear-gradient(135deg, #0f766e, #064e3b); border-radius: 0 0 40px 40px; z-index: 0; }
        .glass-panel { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.5); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); }
        .scroll-area { position: absolute; top: 130px; bottom: 85px; left: 0; width: 100%; overflow-y: auto; padding: 0 16px; z-index: 10; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .nav-bar { position: fixed; bottom: 0; width: 100%; height: 75px; background: white; display: flex; justify-content: space-between; align-items: center; z-index: 150; box-shadow: 0 -5px 25px rgba(0,0,0,0.05); border-radius: 24px 24px 0 0; }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; text-decoration: none; color: #9ca3af; padding-top: 5px; }
        .nav-center-wrap { position: relative; flex: 1.2; display: flex; justify-content: center; }
        .nav-center-btn { position: absolute; top: -30px; width: 65px; height: 65px; background: linear-gradient(135deg, #10b981, #047857); border: 5px solid #f8fafc; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>
    <div class="bg-header"></div>
    <div class="absolute top-6 left-0 w-full px-6 flex justify-between items-center z-50 text-white">
        <h1 class="text-2xl font-black tracking-tight">Kho N√¥ng S·∫£n</h1>
        <div class="glass-panel px-4 py-2 rounded-2xl text-emerald-800 font-black"><span id="gold-val">0</span> üí∞</div>
    </div>
    <div class="scroll-area no-scrollbar" id="list"></div>
    <div class="nav-bar">
        <a href="shop.html" class="nav-item"><span class="text-2xl mb-1 grayscale opacity-60">üõçÔ∏è</span><span class="text-[9px] font-black uppercase tracking-wide">C·ª≠a h√†ng</span></a>
        <a href="kho.html" class="nav-item text-emerald-600"><span class="text-2xl mb-1">üì¶</span><span class="text-[9px] font-black uppercase tracking-wide">Kho</span></a>
        <a href="trangchu.html" class="nav-center-wrap"><div class="nav-center-btn"><span class="text-3xl opacity-80">üå±</span></div><span class="text-[10px] mt-12 font-black text-stone-400">ƒê·∫ßu t∆∞</span></a>
        <a href="gt.html" class="nav-item"><span class="text-2xl mb-1 grayscale opacity-60">üéÆ</span><span class="text-[9px] font-black uppercase tracking-wide">Gi·∫£i tr√≠</span></a>
        <a href="tk.html" class="nav-item"><span class="text-2xl mb-1 grayscale opacity-60">üë§</span><span class="text-[9px] font-black uppercase tracking-wide">T√†i kho·∫£n</span></a>
    </div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    const firebaseConfig = { apiKey: "AIzaSyAQa6awFxFTOrRXPnda8rS6vlKLKPDMJT0", authDomain: "nongtraiheocon.firebaseapp.com", projectId: "nongtraiheocon", storageBucket: "nongtraiheocon.firebasestorage.app", messagingSenderId: "964519162656", appId: "1:964519162656:web:27247ed6287dfc74ef5d45" };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const appId = "nongtraiheocon";

    const INFO = { carrot: { n: 'C√† r·ªët', i: 'ü•ï', b: 'bg-orange-100' }, cow: { n: 'S·ªØa t∆∞∆°i', i: 'ü•õ', b: 'bg-sky-100' }, chicken: { n: 'Tr·ª©ng g√†', i: 'ü•ö', b: 'bg-yellow-100' }, sheep: { n: 'B√¥ng v·∫£i', i: '‚òÅÔ∏è', b: 'bg-slate-100' } };

    onAuthStateChanged(auth, async (user) => {
        if (user) {
            // Tu√¢n th·ªß Rule 1: /artifacts/{appId}/users/{userId}/data/global
            const snap = await getDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'data', 'global'));
            if (snap.exists()) {
                const d = snap.data();
                document.getElementById('gold-val').innerText = (d.gold || 0).toLocaleString();
                const inv = d.inventory || {};
                const c = document.getElementById('list');
                const items = Object.entries(inv).filter(([_, q]) => q > 0);
                if(items.length===0) c.innerHTML = `<p class="text-center py-20 opacity-30 font-black text-xs uppercase tracking-widest">Kho ƒëang tr·ªëng</p>`;
                else {
                    let h = `<div class="grid grid-cols-2 gap-4 pb-10">`;
                    items.forEach(([id, q]) => {
                        const it = INFO[id];
                        h += `<div class="glass-panel p-5 rounded-[2.5rem] flex flex-col items-center">
                            <div class="w-16 h-16 ${it.b} rounded-2xl flex items-center justify-center text-3xl mb-2 border border-white shadow-inner">${it.i}</div>
                            <p class="font-black text-stone-800 text-[11px]">${it.n.toUpperCase()}</p>
                            <span class="bg-emerald-100 text-emerald-700 px-4 py-1 rounded-full text-xs font-black mt-2">SL: ${q}</span>
                        </div>`;
                    });
                    c.innerHTML = h + `</div>`;
                }
            }
        } else { window.location.href = 'index.html'; }
    });
</script>
</body>
</html>

